import { appState } from "./state.js";

const translations = {
  ITA: {
    hero_eyebrow: "TAGO, MINIBOOSTER SWISSLINE & MICROBOOSTER CONFIGURATOR STUDIO",
    hero_title: "Configura la tua unità.",
    hero_lede: "Segui la configurazione guidata, scegli gli optionals e stampa la tua offerta.",
    cta_start: "Inizia configurazione",
    cta_admin: "Area admin",
    meta_eyebrow: "Dati progetto",
    meta_title: "Identifica la richiesta",
    meta_hint: "Questi dati compaiono anche nel PDF/print.",
    meta_project_name: "Nome progetto",
    meta_request_date: "Data richiesta",
    meta_owner: "Owner",
    meta_language: "Lingua documento",
    catalog_eyebrow: "Catalogo",
    catalog_title: "Panoramica macchine",
    catalog_hint: "Vedi tutte le combinazioni MT, LT e optionals in un colpo d'occhio.",
    catalog_filter_all: "Tutte",
    catalog_filter_dorin: "Dorin",
    catalog_filter_bitzer: "Bitzer",
    catalog_toggle_lt: "Solo configurazioni con LT",
    catalog_collapse: "Comprimi",
    catalog_expand: "Espandi",
    catalog_codes_label: "Stringamot",
    catalog_lt_label: "LT disponibili",
    catalog_optionals_label: "Optionals",
    catalog_optionals_onboard: "on-board",
    catalog_optionals_spare: "spare",
    catalog_empty: "Nessuna combinazione corrisponde ai filtri.",
    catalog_apply: "Usa nel configuratore",
    catalog_lt_none: "Solo MT, nessun LT associato",
    theme_toggle_dark: "Tema scuro",
    theme_toggle_light: "Tema chiaro",
    funnel_eyebrow: "Percorso guidato",
    funnel_title: "Scegli passo dopo passo",
    nav_prev: "Indietro",
    nav_next: "Avanti",
    step1_title: "1. Marca",
    step1_hint: "Scegli se configurare Dorin o Bitzer.",
    step2_title: "2. Combinazione MT",
    step2_hint: "Scegli il codice macchina (Stringamot) per la marca selezionata.",
    step3_title: "3. Compressore LT",
    step3_hint: "Nessuno o LT disponibile (36/60 bar) della marca scelta.",
    step4_title: "4. Optionals",
    step4_hint: "Componenti a bordo o spare parts.",
    step5_title: "5. Gascooler",
    step5_hint: "Flagga se serve il gascooler (prezzi specifici per MT verranno aggiunti).",
    step5_label: "Aggiungi gascooler",
    step6_title: "6. Trasporto",
    step6_hint: "Attiva il trasporto, inserisci la città: calcoliamo la distanza in linea d'aria da Treviso.",
    step6_label: "Richiedi trasporto",
    step6_city_label: "Città di consegna",
    step6_country_label: "Paese",
    step6_info_unknown: "Città non trovata nel dizionario rapido, distanza non calcolata.",
    step6_info_result: "Distanza stimata: {km} km - Costo stimato: € {price}",
    step6_info_loading: "Carico database città...",
    step6_info_extra: "Richiedi quotazione al team Enex.",
    step6_reset: "Reset trasporto",
    step6_info_dataset_missing: "Dataset città non disponibile: genera cities-index.json.",
    step6_hint_suggest: "Se non trovi la città, usa quella più vicina con >15k abitanti.",
    summary_title: "Riepilogo",
    summary_discount_label: "Sconto %",
    summary_brand_label: "Marca",
    summary_mt_label: "MT",
    summary_lt_label: "LT",
    summary_optional_label: "Optional",
    summary_gascooler_label: "Gascooler",
    summary_transport_label: "Trasporto",
    summary_km_suffix: "km",
    summary_total_label: "Totale",
    summary_print: "Stampa offerta",
    summary_reset: "Reset",
    admin_title: "Area admin",
    admin_matrix: "Matrice prezzi",
    admin_hint: "Modifica prezzi, esporta il JSON o importa un CSV da Excel (campi: category,id,name,price).",
    admin_export: "Esporta JSON",
    admin_pricebook: "Listino corrente",
    admin_quickedit: "Modifica rapida",
    admin_quickedit_hint: "Clicca un prezzo per modificarlo. Salva per aggiornare il configuratore.",
    admin_save: "Salva modifiche",
    admin_import: "Importa CSV o JSON",
    admin_import_hint: "CSV da Excel: category,id,name,price",
    admin_paste: "Incolla da Excel",
    admin_paste_hint: "Incolla direttamente le celle della matrice (TSV) per vedere anteprima e JSON pulito.",
    print_heading: "Scheda configurazione",
    print_title: "Offerta",
    print_config: "Configurazione",
    print_total_label: "Totale",
  },
  EN: {
    hero_eyebrow: "TAGO, MINIBOOSTER SWISSLINE & MICROBOOSTER CONFIGURATOR STUDIO",
    hero_title: "Configure your unit.",
    hero_lede: "Follow the guided configuration, choose the optionals, and print your offer.",
    cta_start: "Start configuration",
    cta_admin: "Admin area",
    meta_eyebrow: "Project data",
    meta_title: "Identify the request",
    meta_hint: "These fields appear in the PDF/print.",
    meta_project_name: "Project name",
    meta_request_date: "Request date",
    meta_owner: "Owner",
    meta_language: "Document language",
    catalog_eyebrow: "Catalog",
    catalog_title: "Machine overview",
    catalog_hint: "Browse every MT combo with available LT options and prices.",
    catalog_filter_all: "All",
    catalog_filter_dorin: "Dorin",
    catalog_filter_bitzer: "Bitzer",
    catalog_toggle_lt: "Only combos with LT",
    catalog_collapse: "Collapse",
    catalog_expand: "Expand",
    catalog_codes_label: "Stringamot",
    catalog_lt_label: "Available LT",
    catalog_optionals_label: "Optionals",
    catalog_optionals_onboard: "on-board",
    catalog_optionals_spare: "spare",
    catalog_empty: "No combination matches these filters.",
    catalog_apply: "Send to configurator",
    catalog_lt_none: "MT only, no LT linked",
    theme_toggle_dark: "Dark mode",
    theme_toggle_light: "Light mode",
    funnel_eyebrow: "Guided path",
    funnel_title: "Choose step by step",
    nav_prev: "Back",
    nav_next: "Next",
    step1_title: "1. Brand",
    step1_hint: "Choose Dorin or Bitzer.",
    step2_title: "2. MT combination",
    step2_hint: "Pick the machine code (Stringamot) for the selected brand.",
    step3_title: "3. LT compressor",
    step3_hint: "None or available LT (36/60 bar) for the chosen brand.",
    step4_title: "4. Optionals",
    step4_hint: "On-board components or spare parts.",
    step5_title: "5. Gas cooler",
    step5_hint: "Toggle if a gas cooler is needed (per-MT prices will be added later).",
    step5_label: "Add gas cooler",
    step6_title: "6. Transport",
    step6_hint: "Enable transport, enter the city: we estimate air distance from Treviso.",
    step6_label: "Request transport",
    step6_city_label: "Delivery city",
    step6_country_label: "Country",
    step6_info_unknown: "City not found in the quick dictionary, distance not calculated.",
    step6_info_result: "Estimated distance: {km} km - Estimated cost: € {price}",
    step6_info_loading: "Loading city database...",
    step6_info_extra: "Ask the Enex team for a quote.",
    step6_reset: "Reset transport",
    step6_info_dataset_missing: "City dataset unavailable: generate cities-index.json.",
    step6_hint_suggest: "If you can't find the city, use the nearest one (>15k inhabitants).",
    summary_title: "Summary",
    summary_discount_label: "Discount %",
    summary_brand_label: "Brand",
    summary_mt_label: "MT",
    summary_lt_label: "LT",
    summary_optional_label: "Optional",
    summary_gascooler_label: "Gas cooler",
    summary_transport_label: "Transport",
    summary_km_suffix: "km",
    summary_total_label: "Total",
    summary_print: "Print offer",
    summary_reset: "Reset",
    admin_title: "Admin area",
    admin_matrix: "Price matrix",
    admin_hint: "Edit prices, export JSON or import CSV from Excel (fields: category,id,name,price).",
    admin_export: "Export JSON",
    admin_pricebook: "Current pricebook",
    admin_quickedit: "Quick edit",
    admin_quickedit_hint: "Click a price to edit. Save to update the configurator.",
    admin_save: "Save changes",
    admin_import: "Import CSV or JSON",
    admin_import_hint: "Excel CSV: category,id,name,price",
    admin_paste: "Paste from Excel",
    admin_paste_hint: "Paste matrix cells (TSV) to preview and clean JSON.",
    print_heading: "Configuration sheet",
    print_title: "Offer",
    print_config: "Configuration",
    print_total_label: "Total",
  },
  FR: {
    hero_eyebrow: "TAGO, MINIBOOSTER SWISSLINE & MICROBOOSTER CONFIGURATOR STUDIO",
    hero_title: "Configura la tua unità.",
    hero_lede: "Suivez la configuration guidée, choisissez les optionnels et imprimez votre offre.",
    cta_start: "Démarrer la config",
    cta_admin: "Zone admin",
    meta_eyebrow: "Données projet",
    meta_title: "Identifier la demande",
    meta_hint: "Ces champs apparaissent aussi dans le PDF.",
    meta_project_name: "Nom du projet",
    meta_request_date: "Date de demande",
    meta_owner: "Responsable",
    meta_language: "Langue du document",
    catalog_eyebrow: "Catalogue",
    catalog_title: "Vue des machines",
    catalog_hint: "Parcourez toutes les combinaisons MT avec LT disponibles et prix.",
    catalog_filter_all: "Toutes",
    catalog_filter_dorin: "Dorin",
    catalog_filter_bitzer: "Bitzer",
    catalog_toggle_lt: "Uniquement combinaisons avec LT",
    catalog_collapse: "Réduire",
    catalog_expand: "Déplier",
    catalog_codes_label: "Stringamot",
    catalog_lt_label: "LT disponibles",
    catalog_optionals_label: "Options",
    catalog_optionals_onboard: "on-board",
    catalog_optionals_spare: "spare",
    catalog_empty: "Aucune combinaison ne correspond aux filtres.",
    catalog_apply: "Envoyer au configurateur",
    catalog_lt_none: "MT seule, aucun LT associé",
    theme_toggle_dark: "Mode sombre",
    theme_toggle_light: "Mode clair",
    funnel_eyebrow: "Parcours guidé",
    funnel_title: "Choisissez étape par étape",
    nav_prev: "Précédent",
    nav_next: "Suivant",
    step1_title: "1. Marque",
    step1_hint: "Choisissez Dorin ou Bitzer.",
    step2_title: "2. Combinaison MT",
    step2_hint: "Choisissez le code machine (Stringamot) pour la marque.",
    step3_title: "3. Compresseur LT",
    step3_hint: "Aucun ou LT disponible (36/60 bar) pour la marque.",
    step4_title: "4. Options",
    step4_hint: "Éléments à bord ou pièces de rechange.",
    step5_title: "5. Gascooler",
    step5_hint: "Indiquez si le gascooler est nécessaire (prix par MT à venir).",
    step5_label: "Ajouter gascooler",
    step6_title: "6. Transport",
    step6_hint: "Activez le transport, entrez la ville: distance aérienne depuis Trévise.",
    step6_label: "Demander transport",
    step6_city_label: "Ville de livraison",
    step6_country_label: "Pays",
    step6_info_unknown: "Ville non trouvée dans le dictionnaire rapide, distance non calculée.",
    step6_info_result: "Distance estimée: {km} km - Coût estimé: € {price}",
    step6_info_loading: "Chargement de la base de villes...",
    step6_info_extra: "Demandez un devis à l'équipe Enex.",
    step6_reset: "Reset transport",
    step6_info_dataset_missing: "Dataset villes manquant : générez cities-index.json.",
    step6_hint_suggest: "Si vous ne trouvez pas la ville, utilisez la plus proche (>15k habitants).",
    summary_title: "Récapitulatif",
    summary_discount_label: "Remise %",
    summary_brand_label: "Marque",
    summary_mt_label: "MT",
    summary_lt_label: "LT",
    summary_optional_label: "Options",
    summary_gascooler_label: "Gascooler",
    summary_transport_label: "Transport",
    summary_km_suffix: "km",
    summary_total_label: "Total",
    summary_print: "Imprimer l'offre",
    summary_reset: "Réinitialiser",
    admin_title: "Zone admin",
    admin_matrix: "Matrice des prix",
    admin_hint: "Modifiez les prix, exportez JSON ou importez un CSV (champs: category,id,name,price).",
    admin_export: "Exporter JSON",
    admin_pricebook: "Tarif actuel",
    admin_quickedit: "Édition rapide",
    admin_quickedit_hint: "Cliquez un prix pour modifier. Sauvegardez pour mettre à jour.",
    admin_save: "Enregistrer",
    admin_import: "Importer CSV ou JSON",
    admin_import_hint: "CSV Excel: category,id,name,price",
    admin_paste: "Coller depuis Excel",
    admin_paste_hint: "Collez les cellules (TSV) pour prévisualiser/clean JSON.",
    print_heading: "Fiche de configuration",
    print_title: "Offre",
    print_config: "Configuration",
    print_total_label: "Total",
  },
  "DE/CH": {
    hero_eyebrow: "TAGO, MINIBOOSTER SWISSLINE & MICROBOOSTER CONFIGURATOR STUDIO",
    hero_title: "Konfiguriere deine Einheit.",
    hero_lede: "Folge der geführten Konfiguration, wähle die Optionals und drucke dein Angebot.",
    cta_start: "Konfiguration starten",
    cta_admin: "Admin-Bereich",
    meta_eyebrow: "Projektdaten",
    meta_title: "Anfrage identifizieren",
    meta_hint: "Diese Felder erscheinen auch im PDF.",
    meta_project_name: "Projektname",
    meta_request_date: "Anfragedatum",
    meta_owner: "Owner",
    meta_language: "Dokumentsprache",
    catalog_eyebrow: "Katalog",
    catalog_title: "Maschinenübersicht",
    catalog_hint: "Alle MT-Kombinationen mit verfügbaren LT-Optionen und Preisen im Blick.",
    catalog_filter_all: "Alle",
    catalog_filter_dorin: "Dorin",
    catalog_filter_bitzer: "Bitzer",
    catalog_toggle_lt: "Nur Kombinationen mit LT",
    catalog_collapse: "Einklappen",
    catalog_expand: "Ausklappen",
    catalog_codes_label: "Stringamot",
    catalog_lt_label: "Verfügbare LT",
    catalog_optionals_label: "Optionals",
    catalog_optionals_onboard: "on-board",
    catalog_optionals_spare: "spare",
    catalog_empty: "Keine Kombination passt zu diesen Filtern.",
    catalog_apply: "In Konfigurator übernehmen",
    catalog_lt_none: "Nur MT, kein LT verknüpft",
    theme_toggle_dark: "Dunkles Thema",
    theme_toggle_light: "Helles Thema",
    funnel_eyebrow: "Geführter Pfad",
    funnel_title: "Schritt für Schritt wählen",
    nav_prev: "Zurück",
    nav_next: "Weiter",
    step1_title: "1. Marke",
    step1_hint: "Wähle Dorin oder Bitzer.",
    step2_title: "2. MT-Kombination",
    step2_hint: "Maschinencode (Stringamot) für die Marke wählen.",
    step3_title: "3. LT-Kompressor",
    step3_hint: "Keiner oder verfügbarer LT (36/60 bar) der Marke.",
    step4_title: "4. Optionen",
    step4_hint: "On-board Komponenten oder Ersatzteile.",
    step5_title: "5. Gascooler",
    step5_hint: "Ankreuzen, falls Gascooler benötigt (MT-Preise folgen).",
    step5_label: "Gascooler hinzufügen",
    step6_title: "6. Transport",
    step6_hint: "Transport aktivieren, Stadt eingeben: Luftlinie von Treviso berechnet.",
    step6_label: "Transport anfragen",
    step6_city_label: "Lieferstadt",
    step6_country_label: "Land",
    step6_info_unknown: "Stadt nicht im Schnellverzeichnis gefunden, Entfernung nicht berechnet.",
    step6_info_result: "Geschätzte Entfernung: {km} km - Geschätzte Kosten: € {price}",
    step6_info_loading: "Städtedatenbank wird geladen...",
    step6_info_extra: "Preis anfragen beim Enex-Team.",
    step6_reset: "Transport zurücksetzen",
    step6_info_dataset_missing: "Städtedaten fehlen: cities-index.json erzeugen.",
    step6_hint_suggest: "Wenn die Stadt fehlt, nutze die nächstgelegene (>15k Einwohner).",
    summary_title: "Zusammenfassung",
    summary_discount_label: "Rabatt %",
    summary_brand_label: "Marke",
    summary_mt_label: "MT",
    summary_lt_label: "LT",
    summary_optional_label: "Optionals",
    summary_gascooler_label: "Gascooler",
    summary_transport_label: "Transport",
    summary_km_suffix: "km",
    summary_total_label: "Summe",
    summary_print: "Angebot drucken",
    summary_reset: "Zurücksetzen",
    admin_title: "Admin-Bereich",
    admin_matrix: "Preis-Matrix",
    admin_hint: "Preise anpassen, JSON exportieren oder CSV importieren (Felder: category,id,name,price).",
    admin_export: "JSON exportieren",
    admin_pricebook: "Aktueller Preisstand",
    admin_quickedit: "Schnellbearbeitung",
    admin_quickedit_hint: "Preis anklicken zum Ändern. Speichern zum Aktualisieren.",
    admin_save: "Speichern",
    admin_import: "CSV oder JSON importieren",
    admin_import_hint: "Excel-CSV: category,id,name,price",
    admin_paste: "Aus Excel einfügen",
    admin_paste_hint: "Zellen (TSV) einfügen für Vorschau/JSON clean.",
    print_heading: "Konfigurationsblatt",
    print_title: "Angebot",
    print_config: "Konfiguration",
    print_total_label: "Summe",
  },
};

export const getDictionary = () => {
  const lang = appState.selections.project.language || "ITA";
  return translations[lang] || translations.ITA;
};

export const applyTranslations = (nodes, updateThemeToggleLabel, updateCatalogCollapseLabel) => {
  const dict = getDictionary();
  nodes.forEach((node) => {
    const key = node.dataset.i18n;
    if (dict[key]) {
      node.textContent = dict[key];
    }
  });
  updateThemeToggleLabel?.(dict);
  updateCatalogCollapseLabel?.(dict);
  return dict;
};
